version: 1.0
runtime: php81
build:
  commands:
    pre-build:
      - |
                wget https://pecl.php.net/get/imagick  -O imagick \
                 && tar xvzf imagick \
                 && cd imagick-* \
                 && phpize \
                 && ./configure \
                 && make \
                 && make install \
                 && echo extension=imagick.so > /etc/php.d/imagick.ini
    build:
      - echo no build command for this PHP project
      - php --ri imagick
run:
  command: php -S 0.0.0.0:3000 -t .
  network:
    port: 3000
    env: APP_PORT
